<!DOCTYPE html>
<html>
<head>
	<title>Rock Paper Scissors</title>
</head>
<body>
	<script type="text/javascript">

		let roundCounter = 1;

		let playerScore = 0;
		let computerScore = 0;

		let playerSelection;
		let computerSelection;
		
		let message;

		function computerPlay() {
			const options = ['rock', 'paper', 'scissors'];
			return options[Math.floor(Math.random() * options.length)];
		}

		function playRound() {
			playerSelection = prompt('Choose rock, paper or scissors.').toLowerCase();
			computerSelection = computerPlay();

			message = "ROUND #" + roundCounter + ".";

			if (playerSelection === computerSelection) {
				message += " It's a tie! Play again.";
				return message;
			} else if (playerSelection === 'rock' && computerSelection === 'scissors') {
				playerScore++;
				message += ' You win! Rock crushes scissors.';
				return message;
			} else if (playerSelection === 'rock' && computerSelection === 'paper') {
				computerScore++;
				message += ' You lose! Paper covers rock.';
				return message;
			} else if (playerSelection === 'scissors' && computerSelection === 'rock') {
				computerScore++;
				message += ' You lose! Rock crushes scissors.';
				return message;
			} else if (playerSelection === 'scissors' && computerSelection === 'paper') {
				playerScore++;
				message += ' You win! Scissors cut paper.';
				return message;
			} else if (playerSelection === 'paper' && computerSelection === 'rock') {
				playerScore++;
				message += ' You win! Paper covers rock.';
				return message;
			} else if (playerSelection === 'paper' && computerSelection === 'scissors') {
				computerScore++;
				message += ' You lose! Scissors cut paper.';
				return message;
			} else {
				message += ' Wrong input. Try again.';
				return message;
			}
		}

		function game() {
			do {
				console.log(playRound());
				roundCounter++;
			} while (playerScore < 3 && computerScore < 3);

			if (playerScore === 3) {
				message = "Congratulations! You're the winner.";
			} else {
				message = "Sorry! You've lost.";
			}

			message += " Your score is " + playerScore + " and computer's score is " + computerScore + ".";
			return message;
		}
		
		console.log(game());
		
	</script>
</body>
</html>